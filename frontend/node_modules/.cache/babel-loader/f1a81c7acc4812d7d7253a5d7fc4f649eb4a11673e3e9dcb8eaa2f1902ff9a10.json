{"ast":null,"code":"import{useState,useEffect,useContext}from'react';import{useParams}from'react-router-dom';import{NotFound}from'./Errors';import Toolbar from'../../Editor/Toolbar';import{EditorContext}from'../../Context/EditorContext';import PropertyButtons from'../Partials/PropertyButtons';import Info from'../Partials/ElementInfo';import PropertiesBox from\"../Partials/PropertiesBox\";import ElementLoading from'./LoadingSkeleton';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Element(_ref){let{setAuth}=_ref;const isEditor=useContext(EditorContext);const{name}=useParams();const[generalContent,setGeneralContent]=useState();const[propertiesContent,setPropertiesContent]=useState();const[hasError,setHasError]=useState(false);const[activePanel,setActivePanel]=useState();const[loading,setLoading]=useState(true);useEffect(()=>{const fetch1=fetchGeneralContent();const fetch2=fetchPropertiesContent();Promise.all([fetch1,fetch2]).then(()=>{setLoading(false);setActivePanel(\"physical\");});},[]);async function fetchGeneralContent(){try{const res=await fetch(\"\".concat(process.env.REACT_APP_API_BASE_URL,\"/api/elements/\").concat(name,\"?section=general\"));if(!res.ok){if(isEditor){setGeneralContent({});return;}else{setHasError(true);return;}}const info=await res.json();setHasError(false);setGeneralContent(info);}catch(err){console.log(err);setHasError(true);}}async function fetchPropertiesContent(){try{const res=await fetch(\"\".concat(process.env.REACT_APP_API_BASE_URL,\"/api/elements/\").concat(name,\"?section=properties\"));if(!res.ok){if(isEditor){setPropertiesContent({physical:[],chemical:[],usage:[],reactions:[]});return;}else{setHasError(true);return;}}const info=await res.json();setHasError(false);setPropertiesContent(info);}catch(err){console.log(err);setHasError(true);}}if(hasError){return/*#__PURE__*/_jsx(NotFound,{});}if(loading){return/*#__PURE__*/_jsx(ElementLoading,{});}else{return/*#__PURE__*/_jsxs(_Fragment,{children:[isEditor&&/*#__PURE__*/_jsx(Toolbar,{name:name,propertiesContent:propertiesContent,generalContent:generalContent,setAuth:setAuth}),/*#__PURE__*/_jsxs(\"div\",{className:\"container-element-page\",children:[/*#__PURE__*/_jsx(Info,{generalContent:generalContent,setGeneralContent:setGeneralContent,setAuth:setAuth}),/*#__PURE__*/_jsx(PropertyButtons,{setActivePanel:setActivePanel,activePanel:activePanel}),/*#__PURE__*/_jsx(PropertiesBox,{setPropertiesContent:setPropertiesContent,propertiesContent:propertiesContent,activePanel:activePanel})]})]});}}","map":{"version":3,"names":["useState","useEffect","useContext","useParams","NotFound","Toolbar","EditorContext","PropertyButtons","Info","PropertiesBox","ElementLoading","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Element","_ref","setAuth","isEditor","name","generalContent","setGeneralContent","propertiesContent","setPropertiesContent","hasError","setHasError","activePanel","setActivePanel","loading","setLoading","fetch1","fetchGeneralContent","fetch2","fetchPropertiesContent","Promise","all","then","res","fetch","concat","process","env","REACT_APP_API_BASE_URL","ok","info","json","err","console","log","physical","chemical","usage","reactions","children","className"],"sources":["C:/Users/Korisnik/Documents/SWE/GOwebapp/frontend/src/components/Base/Pages/Element.jsx"],"sourcesContent":["import { useState, useEffect, useContext } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { NotFound } from './Errors';\r\nimport Toolbar from '../../Editor/Toolbar';\r\nimport { EditorContext } from '../../Context/EditorContext';\r\nimport PropertyButtons from '../Partials/PropertyButtons';\r\nimport Info from '../Partials/ElementInfo';\r\nimport PropertiesBox from \"../Partials/PropertiesBox\"\r\nimport ElementLoading from './LoadingSkeleton';\r\n\r\nexport default function Element({setAuth}) {\r\n    const isEditor = useContext(EditorContext)\r\n    const { name } = useParams()\r\n\r\n    const [generalContent, setGeneralContent] = useState()\r\n    const [propertiesContent, setPropertiesContent] = useState()\r\n    const [hasError, setHasError] = useState(false)\r\n    const [activePanel, setActivePanel] = useState()\r\n    const [loading, setLoading] = useState(true)\r\n\r\n    useEffect(() => {\r\n        const fetch1 = fetchGeneralContent()\r\n        const fetch2 = fetchPropertiesContent()\r\n        Promise.all([fetch1, fetch2]).then(() => {\r\n            setLoading(false)\r\n            setActivePanel(\"physical\")\r\n        })\r\n    }, [])\r\n\r\n    async function fetchGeneralContent() {\r\n        try {\r\n            const res = await fetch(`${process.env.REACT_APP_API_BASE_URL}/api/elements/${name}?section=general`)\r\n\r\n            if (!res.ok) {\r\n                if (isEditor) {\r\n                    setGeneralContent({})\r\n                    return\r\n                } else {\r\n                    setHasError(true)\r\n                    return\r\n                }\r\n            }\r\n\r\n            const info = await res.json()\r\n            setHasError(false)\r\n            setGeneralContent(info)\r\n        } catch (err) {\r\n            console.log(err)\r\n            setHasError(true)\r\n        }\r\n    }\r\n\r\n    async function fetchPropertiesContent() {\r\n        try {\r\n            const res = await fetch(`${process.env.REACT_APP_API_BASE_URL}/api/elements/${name}?section=properties`)\r\n\r\n            if (!res.ok) {\r\n                if (isEditor) {\r\n                    setPropertiesContent({physical:[], chemical:[], usage:[], reactions:[]})\r\n                    return\r\n                } else {\r\n                    setHasError(true)\r\n                    return\r\n                }\r\n            }\r\n\r\n            const info = await res.json()\r\n            setHasError(false)\r\n            setPropertiesContent(info)\r\n        } catch (err) {\r\n            console.log(err)\r\n            setHasError(true)\r\n        }\r\n    }\r\n\r\n    if (hasError) {\r\n        return <NotFound />\r\n    }\r\n\r\n    if (loading) {\r\n        return <ElementLoading/>\r\n    } else {\r\n        return (\r\n            <>\r\n                {isEditor && <Toolbar name={name} propertiesContent={propertiesContent} generalContent={generalContent} setAuth={setAuth} />}\r\n                <div className=\"container-element-page\">\r\n                    <Info generalContent={generalContent} setGeneralContent={setGeneralContent} setAuth={setAuth} />\r\n\r\n                    <PropertyButtons setActivePanel={setActivePanel} activePanel={activePanel} />\r\n\r\n                    <PropertiesBox setPropertiesContent={setPropertiesContent} propertiesContent={propertiesContent} activePanel={activePanel} />\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n}\r\n"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,CAAEC,UAAU,KAAQ,OAAO,CACvD,OAASC,SAAS,KAAQ,kBAAkB,CAC5C,OAASC,QAAQ,KAAQ,UAAU,CACnC,MAAO,CAAAC,OAAO,KAAM,sBAAsB,CAC1C,OAASC,aAAa,KAAQ,6BAA6B,CAC3D,MAAO,CAAAC,eAAe,KAAM,6BAA6B,CACzD,MAAO,CAAAC,IAAI,KAAM,yBAAyB,CAC1C,MAAO,CAAAC,aAAa,KAAM,2BAA2B,CACrD,MAAO,CAAAC,cAAc,KAAM,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAE/C,cAAe,SAAS,CAAAC,OAAOA,CAAAC,IAAA,CAAY,IAAX,CAACC,OAAO,CAAC,CAAAD,IAAA,CACrC,KAAM,CAAAE,QAAQ,CAAGlB,UAAU,CAACI,aAAa,CAAC,CAC1C,KAAM,CAAEe,IAAK,CAAC,CAAGlB,SAAS,CAAC,CAAC,CAE5B,KAAM,CAACmB,cAAc,CAAEC,iBAAiB,CAAC,CAAGvB,QAAQ,CAAC,CAAC,CACtD,KAAM,CAACwB,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGzB,QAAQ,CAAC,CAAC,CAC5D,KAAM,CAAC0B,QAAQ,CAAEC,WAAW,CAAC,CAAG3B,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAAC4B,WAAW,CAAEC,cAAc,CAAC,CAAG7B,QAAQ,CAAC,CAAC,CAChD,KAAM,CAAC8B,OAAO,CAAEC,UAAU,CAAC,CAAG/B,QAAQ,CAAC,IAAI,CAAC,CAE5CC,SAAS,CAAC,IAAM,CACZ,KAAM,CAAA+B,MAAM,CAAGC,mBAAmB,CAAC,CAAC,CACpC,KAAM,CAAAC,MAAM,CAAGC,sBAAsB,CAAC,CAAC,CACvCC,OAAO,CAACC,GAAG,CAAC,CAACL,MAAM,CAAEE,MAAM,CAAC,CAAC,CAACI,IAAI,CAAC,IAAM,CACrCP,UAAU,CAAC,KAAK,CAAC,CACjBF,cAAc,CAAC,UAAU,CAAC,CAC9B,CAAC,CAAC,CACN,CAAC,CAAE,EAAE,CAAC,CAEN,cAAe,CAAAI,mBAAmBA,CAAA,CAAG,CACjC,GAAI,CACA,KAAM,CAAAM,GAAG,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,sBAAsB,mBAAAH,MAAA,CAAiBpB,IAAI,oBAAkB,CAAC,CAErG,GAAI,CAACkB,GAAG,CAACM,EAAE,CAAE,CACT,GAAIzB,QAAQ,CAAE,CACVG,iBAAiB,CAAC,CAAC,CAAC,CAAC,CACrB,OACJ,CAAC,IAAM,CACHI,WAAW,CAAC,IAAI,CAAC,CACjB,OACJ,CACJ,CAEA,KAAM,CAAAmB,IAAI,CAAG,KAAM,CAAAP,GAAG,CAACQ,IAAI,CAAC,CAAC,CAC7BpB,WAAW,CAAC,KAAK,CAAC,CAClBJ,iBAAiB,CAACuB,IAAI,CAAC,CAC3B,CAAE,MAAOE,GAAG,CAAE,CACVC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAChBrB,WAAW,CAAC,IAAI,CAAC,CACrB,CACJ,CAEA,cAAe,CAAAQ,sBAAsBA,CAAA,CAAG,CACpC,GAAI,CACA,KAAM,CAAAI,GAAG,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,sBAAsB,mBAAAH,MAAA,CAAiBpB,IAAI,uBAAqB,CAAC,CAExG,GAAI,CAACkB,GAAG,CAACM,EAAE,CAAE,CACT,GAAIzB,QAAQ,CAAE,CACVK,oBAAoB,CAAC,CAAC0B,QAAQ,CAAC,EAAE,CAAEC,QAAQ,CAAC,EAAE,CAAEC,KAAK,CAAC,EAAE,CAAEC,SAAS,CAAC,EAAE,CAAC,CAAC,CACxE,OACJ,CAAC,IAAM,CACH3B,WAAW,CAAC,IAAI,CAAC,CACjB,OACJ,CACJ,CAEA,KAAM,CAAAmB,IAAI,CAAG,KAAM,CAAAP,GAAG,CAACQ,IAAI,CAAC,CAAC,CAC7BpB,WAAW,CAAC,KAAK,CAAC,CAClBF,oBAAoB,CAACqB,IAAI,CAAC,CAC9B,CAAE,MAAOE,GAAG,CAAE,CACVC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAChBrB,WAAW,CAAC,IAAI,CAAC,CACrB,CACJ,CAEA,GAAID,QAAQ,CAAE,CACV,mBAAOd,IAAA,CAACR,QAAQ,GAAE,CAAC,CACvB,CAEA,GAAI0B,OAAO,CAAE,CACT,mBAAOlB,IAAA,CAACF,cAAc,GAAC,CAAC,CAC5B,CAAC,IAAM,CACH,mBACII,KAAA,CAAAE,SAAA,EAAAuC,QAAA,EACKnC,QAAQ,eAAIR,IAAA,CAACP,OAAO,EAACgB,IAAI,CAAEA,IAAK,CAACG,iBAAiB,CAAEA,iBAAkB,CAACF,cAAc,CAAEA,cAAe,CAACH,OAAO,CAAEA,OAAQ,CAAE,CAAC,cAC5HL,KAAA,QAAK0C,SAAS,CAAC,wBAAwB,CAAAD,QAAA,eACnC3C,IAAA,CAACJ,IAAI,EAACc,cAAc,CAAEA,cAAe,CAACC,iBAAiB,CAAEA,iBAAkB,CAACJ,OAAO,CAAEA,OAAQ,CAAE,CAAC,cAEhGP,IAAA,CAACL,eAAe,EAACsB,cAAc,CAAEA,cAAe,CAACD,WAAW,CAAEA,WAAY,CAAE,CAAC,cAE7EhB,IAAA,CAACH,aAAa,EAACgB,oBAAoB,CAAEA,oBAAqB,CAACD,iBAAiB,CAAEA,iBAAkB,CAACI,WAAW,CAAEA,WAAY,CAAE,CAAC,EAC5H,CAAC,EACR,CAAC,CAEX,CACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}