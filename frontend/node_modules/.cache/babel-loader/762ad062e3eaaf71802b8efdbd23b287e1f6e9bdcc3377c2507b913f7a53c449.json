{"ast":null,"code":"import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export default function UploadImage(_ref){let{generalContent,setGeneralContent,setAuth}=_ref;async function uploadImage(files){async function deliverContent(files){const formData=new FormData();formData.append(\"file\",files[0]);const token=localStorage.getItem(\"jwt-token\");const res=await fetch(\"\".concat(process.env.REACT_APP_API_BASE_URL,\"/api/editor/images\"),{method:\"POST\",body:formData,headers:{\"Authorization\":\"Bearer \".concat(token)}});const info=await res.json();console.log(info);if(res.ok){return info.imageSource;}else{return null;}}const newImgSrc=await deliverContent(files);if(!newImgSrc){setAuth(false);}else{let newGeneralContent={...generalContent};newGeneralContent[\"imageSource\"]=newImgSrc;setGeneralContent(newGeneralContent);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:e=>uploadImage(e.target.files),style:{position:\"absolute\",right:0}}),/*#__PURE__*/_jsx(\"img\",{src:generalContent.imageSource,alt:\"uploaded\",className:\"element-img\",style:{objectFit:'cover'}})]});}","map":{"version":3,"names":["UploadImage","_ref","generalContent","setGeneralContent","setAuth","uploadImage","files","deliverContent","formData","FormData","append","token","localStorage","getItem","res","fetch","concat","process","env","REACT_APP_API_BASE_URL","method","body","headers","info","json","console","log","ok","imageSource","newImgSrc","newGeneralContent","_jsxs","_Fragment","children","_jsx","type","onChange","e","target","style","position","right","src","alt","className","objectFit"],"sources":["C:/Users/Korisnik/Documents/SWE/GOwebapp/frontend/src/components/Editor/UploadImage.jsx"],"sourcesContent":["export default function UploadImage({ generalContent, setGeneralContent, setAuth }) {\r\n    async function uploadImage(files) {\r\n        async function deliverContent(files) {\r\n            const formData = new FormData()\r\n            formData.append(\"file\", files[0])\r\n\r\n            const token = localStorage.getItem(\"jwt-token\")\r\n\r\n            const res = await fetch(`${process.env.REACT_APP_API_BASE_URL}/api/editor/images`, {\r\n                method: \"POST\",\r\n                body: formData,\r\n                headers: {\r\n                    \"Authorization\": `Bearer ${token}`\r\n                },\r\n            })\r\n\r\n            const info = await res.json()\r\n            console.log(info)\r\n\r\n            if (res.ok) {\r\n                return info.imageSource\r\n            } else {\r\n                return null\r\n            }\r\n        }\r\n\r\n        const newImgSrc = await deliverContent(files)\r\n        if (!newImgSrc) {\r\n            setAuth(false)\r\n        } else {\r\n            let newGeneralContent = { ...generalContent }\r\n            newGeneralContent[\"imageSource\"] = newImgSrc\r\n            setGeneralContent(newGeneralContent);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <input type=\"file\" onChange={(e) => uploadImage(e.target.files)} style={{ position: \"absolute\", right: 0 }} />\r\n\r\n            <img\r\n                src={generalContent.imageSource}\r\n                alt=\"uploaded\"\r\n                className=\"element-img\"\r\n                style={{ objectFit: 'cover' }}\r\n            />\r\n        </>\r\n    );\r\n}"],"mappings":"+EAAA,cAAe,SAAS,CAAAA,WAAWA,CAAAC,IAAA,CAAiD,IAAhD,CAAEC,cAAc,CAAEC,iBAAiB,CAAEC,OAAQ,CAAC,CAAAH,IAAA,CAC9E,cAAe,CAAAI,WAAWA,CAACC,KAAK,CAAE,CAC9B,cAAe,CAAAC,cAAcA,CAACD,KAAK,CAAE,CACjC,KAAM,CAAAE,QAAQ,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,CAAEJ,KAAK,CAAC,CAAC,CAAC,CAAC,CAEjC,KAAM,CAAAK,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC,CAE/C,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAC,KAAK,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,sBAAsB,uBAAsB,CAC/EC,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEb,QAAQ,CACdc,OAAO,CAAE,CACL,eAAe,WAAAN,MAAA,CAAYL,KAAK,CACpC,CACJ,CAAC,CAAC,CAEF,KAAM,CAAAY,IAAI,CAAG,KAAM,CAAAT,GAAG,CAACU,IAAI,CAAC,CAAC,CAC7BC,OAAO,CAACC,GAAG,CAACH,IAAI,CAAC,CAEjB,GAAIT,GAAG,CAACa,EAAE,CAAE,CACR,MAAO,CAAAJ,IAAI,CAACK,WAAW,CAC3B,CAAC,IAAM,CACH,MAAO,KAAI,CACf,CACJ,CAEA,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAAtB,cAAc,CAACD,KAAK,CAAC,CAC7C,GAAI,CAACuB,SAAS,CAAE,CACZzB,OAAO,CAAC,KAAK,CAAC,CAClB,CAAC,IAAM,CACH,GAAI,CAAA0B,iBAAiB,CAAG,CAAE,GAAG5B,cAAe,CAAC,CAC7C4B,iBAAiB,CAAC,aAAa,CAAC,CAAGD,SAAS,CAC5C1B,iBAAiB,CAAC2B,iBAAiB,CAAC,CACxC,CACJ,CAAC,CAED,mBACIC,KAAA,CAAAC,SAAA,EAAAC,QAAA,eACIC,IAAA,UAAOC,IAAI,CAAC,MAAM,CAACC,QAAQ,CAAGC,CAAC,EAAKhC,WAAW,CAACgC,CAAC,CAACC,MAAM,CAAChC,KAAK,CAAE,CAACiC,KAAK,CAAE,CAAEC,QAAQ,CAAE,UAAU,CAAEC,KAAK,CAAE,CAAE,CAAE,CAAE,CAAC,cAE9GP,IAAA,QACIQ,GAAG,CAAExC,cAAc,CAAC0B,WAAY,CAChCe,GAAG,CAAC,UAAU,CACdC,SAAS,CAAC,aAAa,CACvBL,KAAK,CAAE,CAAEM,SAAS,CAAE,OAAQ,CAAE,CACjC,CAAC,EACJ,CAAC,CAEX","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}